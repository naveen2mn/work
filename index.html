<!DOCTYPE html>
<html lang="en">
<head>
  <title>Custom Data Model</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
    .table-list {
        height: 400px;
        overflow: auto
    }
    .inner-box-header{
        padding: 10px;
    }


        .form-control-feedback {
            cursor:pointer;
            pointer-events:visible;
            opacity: 0.3;
        }
        .form-control-feedback:hover {
            opacity:1;
            color: red;
        }
        #addColumn{
            padding:2px;
            cursor: pointer;
        }
        #addColumn:hover{
            /*color: green;*/
        }
        .rem-col{
               font-size: 16px;
    padding: 6px 2px;
            }
            button[disabled]{
                opacity: 0.3;
            }
        .mod{
            background: #d5bb63;
        }
        select {
            /* for Firefox */
            -moz-appearance: none;
            /* for Chrome */
            -webkit-appearance: none;
            border:0;
            padding: 2px 4px;
            width:100%;
        }

        /* For IE10 */
        select::-ms-expand {
            display: none;
        }
        input{
            margin-right: 20px;
        }
    .content-title {
    font-size: 16px;
    color: white;
    background: #003a5f;
    padding: 4px 8px;
    margin-bottom: 10px;
        min-height: 30px;

    }
    
    </style>
</head>
<body>
<div class="wrapper">
    <div class="inner-box">
        <div class="inner-box-header">Custom Data Model
            <div class="btn-sm btn-success pull-right" id="save_btn">Save</div>
        </div>
        <div class="inner-box-body">
            <div class="row">
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <div class="content-title">Tables</div>
                    <div style="padding: 0 0px 8px;text-align: right;">Number of Tables : <span id="table_count"></span></div>
                    <div class="list-group table-list" id="table_list">
                        There is no content to display
                    </div>
                </div>
                <div class="col-md-8 col-sm-8 col-xs-12">
                    <div class="content-title">Column <span class="glyphicon glyphicon-plus pull-right" id="addColumn"></span></div>
                    <div style="padding: 0 0px 8px;">Table Name : <span id="table_name"></span></div>
                    <div id="add_column"></div>
                    <div class="col-list" id="column_list">
                        Please select table
                    </div>
                    
                </div>
            </div>
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Remove Column?</h4>
                        </div>
                        <div class="modal-body" style="text-align:center;">            
                            <p class="modal-msg">Are you want to remove this Column?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn-danger"  data-dismiss="modal" id="confirmDelete">Yes</button>
                            <button type="button" class="btn-warning" data-dismiss="modal">No</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="sModal" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Success</h4>
                        </div>
                        <div class="modal-body" style="text-align:center;">            
                            <p class="modal-msg">Changes has been saved successfuly...!</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn-primary"  data-dismiss="modal" id="confirmDelete">Ok</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="bootstrap.js"></script>
  <script>
  
    //(function () {
        var tableList = [];
        var dataTypes = [];
        var deleteRecord = '';
        var selectedTable = 0;
            var data1 = '{"MarketingAuthorisationApplication":[{"Name":"Id","DataType":"bigint"},{"Name":"MarketingAuthorisationProcedureId","DataType":"bigint"},{"Name":"Number","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Date","DataType":"datetime"},{"Name":"FirstAuthorizationDate","DataType":"datetime"},{"Name":"VersionNo","DataType":"decimal"}],"MarketingAuthorisationHolder":[{"Name":"Id","DataType":"bigint"},{"Name":"OrganizationId","DataType":"bigint"},{"Name":"MarketingAuthorisationId","DataType":"bigint"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"DevelopmentSubstances_XEVMPD":[{"Name":"CasNumber","DataType":"int"},{"Name":"Id","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"NewOwnerId","DataType":"int"},{"Name":"SponserCode","DataType":"int"},{"Name":"ResolutionMode","DataType":"varchar"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"DevSubstance","DataType":"varchar"},{"Name":"OperationType","DataType":"varchar"},{"Name":"Virtual","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"Evcode","DataType":"varchar"},{"Name":"MolecularFormula","DataType":"varchar"},{"Name":"SubstanceClass","DataType":"varchar"},{"Name":"CBD","DataType":"varchar"},{"Name":"DevSubstanceName","DataType":"varchar"},{"Name":"InternationalCode","DataType":"varchar"},{"Name":"SubstanceAttachments","DataType":"varchar"},{"Name":"SubstanceSSIS","DataType":"varchar"},{"Name":"Comments","DataType":"varchar"}],"MarketingAuthorisationProcedure":[{"Name":"Id","DataType":"bigint"},{"Name":"MarketingAuthorisationId","DataType":"bigint"},{"Name":"IdentifierNumber","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Date","DataType":"datetime"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"MarketingStatus":[{"Name":"Id","DataType":"bigint"},{"Name":"MarketingAuthorisationId","DataType":"bigint"},{"Name":"Country","DataType":"nvarchar"},{"Name":"Jurisdiction","DataType":"nvarchar"},{"Name":"JurisdictionMAnumber","DataType":"nvarchar"},{"Name":"Date","DataType":"datetime"},{"Name":"JurisdictionLegalStatus","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"MASME":[{"Name":"Id","DataType":"bigint"},{"Name":"MarketingAuthorisationId","DataType":"bigint"},{"Name":"Size","DataType":"nvarchar"},{"Name":"Flag","DataType":"nvarchar"},{"Name":"Number","DataType":"nvarchar"},{"Name":"Date","DataType":"datetime"},{"Name":"VersionNo","DataType":"decimal"}],"ApprovedSubstances_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"SourceCode","DataType":"int"},{"Name":"LanguageCode","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"Term","DataType":"varchar"},{"Name":"SubstanceAlias","DataType":"varchar"},{"Name":"AliasName","DataType":"varchar"},{"Name":"ResolutionModeAlias","DataType":"varchar"},{"Name":"AliasTranslation","DataType":"varchar"},{"Name":"LanguageCodeAlias","DataType":"varchar"},{"Name":"TermAlias","DataType":"varchar"},{"Name":"InternationalCode","DataType":"varchar"},{"Name":"Previoussevcode","DataType":"varchar"},{"Name":"SubstanceSSIS","DataType":"varchar"},{"Name":"SubstanceAttachments","DataType":"varchar"},{"Name":"Comment","DataType":"varchar"},{"Name":"ResolutionMode","DataType":"varchar"},{"Name":"SubstanceName","DataType":"varchar"},{"Name":"CBD","DataType":"varchar"},{"Name":"SubstanceTranslation","DataType":"varchar"},{"Name":"OperationType","DataType":"varchar"},{"Name":"ApprovedSubstance","DataType":"varchar"},{"Name":"Virtual","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"Evcode","DataType":"varchar"}],"MasterFile":[{"Name":"id","DataType":"int"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"},{"Name":"Location","DataType":"nvarchar"}],"MedicinalProduct":[{"Name":"id","DataType":"bigint"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"LastUpdatedOn","DataType":"datetime"},{"Name":"LastUpdatedBy","DataType":"varbinary"},{"Name":"VersionNo","DataType":"decimal"},{"Name":"MF_ID","DataType":"int"},{"Name":"MP_ID","DataType":"nvarchar"},{"Name":"DoseForm","DataType":"nvarchar"},{"Name":"AdditionalIndicator","DataType":"nvarchar"},{"Name":"SpecialMeasures","DataType":"nvarchar"},{"Name":"OrphanStatus","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"IMPIDCrossReference","DataType":"nvarchar"}],"MedicinalProductClassification":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"System","DataType":"nvarchar"},{"Name":"ATCCode","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"MedicinesRegulatoryAgency":[{"Name":"Id","DataType":"bigint"},{"Name":"OrganizationId","DataType":"bigint"},{"Name":"marketingAuthorisationId","DataType":"bigint"},{"Name":"ManufacturingOperationId","DataType":"bigint"},{"Name":"VersionNo","DataType":"decimal"}],"ExtractReadyVersions":[{"Name":"Id","DataType":"int"},{"Name":"FileId","DataType":"int"},{"Name":"Version","DataType":"decimal"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"nvarchar"},{"Name":"Data","DataType":"nvarchar"}],"OtherLocation":[{"Name":"Id","DataType":"bigint"},{"Name":"OrganizationId","DataType":"bigint"},{"Name":"Identifier","DataType":"nvarchar"},{"Name":"LocationRole","DataType":"nvarchar"},{"Name":"Address","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"OtherTherapySpecifics":[{"Name":"Id","DataType":"bigint"},{"Name":"ContraIndicationId","DataType":"bigint"},{"Name":"TherapeuticIndicationId","DataType":"bigint"},{"Name":"RelationshipType","DataType":"nvarchar"},{"Name":"Medication","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PackageComponent":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Material","DataType":"nvarchar"},{"Name":"AlternateMaterial","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Attachments_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"Attachment","DataType":"varchar"},{"Name":"OperationType","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"FileName","DataType":"varchar"},{"Name":"FileType","DataType":"varchar"},{"Name":"AttachmentName","DataType":"varchar"},{"Name":"AttachmentType","DataType":"varchar"},{"Name":"LanguageCode","DataType":"varchar"},{"Name":"AttachmentVersion","DataType":"varchar"},{"Name":"AttachmentVersionDate","DataType":"datetime"},{"Name":"AttachmentVersionDateFormat","DataType":"varchar"}],"PackagedMedicinalProduct":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"marketingAuthorisationId","DataType":"bigint"},{"Name":"PCID","DataType":"nvarchar"},{"Name":"Description","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"MessageHeader_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"Number","DataType":"bigint"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"SenderIdentifier","DataType":"varchar"},{"Name":"ReceiverIdentifier","DataType":"varchar"},{"Name":"Date","DataType":"datetime"},{"Name":"DateFormat","DataType":"varchar"},{"Name":"Type","DataType":"varchar"},{"Name":"FormatVersion","DataType":"varchar"},{"Name":"FormatRelease","DataType":"varchar"}],"PharmaceuticalProduct":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"AdministrableDoseForm","DataType":"nvarchar"},{"Name":"Php_ID","DataType":"nvarchar"},{"Name":"PresentationUnit","DataType":"nvarchar"},{"Name":"Quantity","DataType":"tinyint"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"CodeMasters":[{"Name":"Id","DataType":"int"},{"Name":"Name","DataType":"nvarchar"}],"DataSource":[{"Name":"Id","DataType":"int"},{"Name":"Name","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"ConnectionString","DataType":"nvarchar"},{"Name":"IsActive","DataType":"bit"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"nvarchar"},{"Name":"LastUpdatedOn","DataType":"datetime"},{"Name":"LastUpdatedBy","DataType":"nvarchar"}],"PharmaceuticalProductCharacteristics":[{"Name":"Id","DataType":"bigint"},{"Name":"PharmaceuticalProductId","DataType":"bigint"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Value","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PHPIDSet":[{"Name":"Id","DataType":"bigint"},{"Name":"PharmaceuticalProductId","DataType":"bigint"},{"Name":"IdentifierSet","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PhysicalCharacteristics":[{"Name":"Id","DataType":"bigint"},{"Name":"DeviceId","DataType":"bigint"},{"Name":"PackageComponentId","DataType":"bigint"},{"Name":"ManufacturedItemId","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"Height","DataType":"nvarchar"},{"Name":"HeightUOM","DataType":"nvarchar"},{"Name":"Width","DataType":"nvarchar"},{"Name":"WidthUOM","DataType":"nvarchar"},{"Name":"Depth","DataType":"nvarchar"},{"Name":"DepthUOM","DataType":"nvarchar"},{"Name":"Weight","DataType":"nvarchar"},{"Name":"WeightUOM","DataType":"nvarchar"},{"Name":"NominalVolume","DataType":"nvarchar"},{"Name":"NominalVolumeUOM","DataType":"nvarchar"},{"Name":"ExternalDiameter","DataType":"nvarchar"},{"Name":"ExternalDiameterUOM","DataType":"nvarchar"},{"Name":"Shape","DataType":"nvarchar"},{"Name":"Color","DataType":"nvarchar"},{"Name":"IMPrint","DataType":"nvarchar"},{"Name":"Image","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PopulationSpecifics":[{"Name":"Id","DataType":"bigint"},{"Name":"ContraIndicationId","DataType":"bigint"},{"Name":"TherapeuticIndicationId","DataType":"bigint"},{"Name":"Age","DataType":"nvarchar"},{"Name":"AgeRange","DataType":"nvarchar"},{"Name":"Gender","DataType":"nvarchar"},{"Name":"Race","DataType":"nvarchar"},{"Name":"HealthStatus","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"ProductCrossReference":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"CrossRef","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PSURSubmission":[{"Name":"Id","DataType":"bigint"},{"Name":"MarketingAuthorisationId","DataType":"bigint"},{"Name":"FrequencySafetyReport","DataType":"nvarchar"},{"Name":"SubmissionDate","DataType":"datetime"},{"Name":"InternationalBirthDate","DataType":"datetime"},{"Name":"ReferenceDate","DataType":"datetime"},{"Name":"DataLockPoint","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"ReferenceStrength":[{"Name":"Id","DataType":"bigint"},{"Name":"StrengthId","DataType":"bigint"},{"Name":"Substance","DataType":"nvarchar"},{"Name":"SpecifiedSubstance","DataType":"nvarchar"},{"Name":"StrengthRange","DataType":"nvarchar"},{"Name":"StrengthMeasurementPoint","DataType":"nvarchar"},{"Name":"Country","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"XEVMPD":[{"Name":"VersionNumber","DataType":"int"},{"Name":"ApplicationNumber","DataType":"int"},{"Name":"ProceduralApprovalNumber","DataType":"int"},{"Name":"Id","DataType":"int"},{"Name":"ProductID","DataType":"int"},{"Name":"ApprovalLiscenceNumber","DataType":"int"},{"Name":"SpecialInstruction","DataType":"varchar"},{"Name":"MADocumentReciptDate","DataType":"datetime"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"ProductName","DataType":"varchar"},{"Name":"Status","DataType":"varchar"},{"Name":"RegulatoryBody","DataType":"varchar"},{"Name":"ProceduralApprovalDate","DataType":"datetime"},{"Name":"LegalBasis","DataType":"varchar"},{"Name":"ApprovalDate","DataType":"datetime"},{"Name":"MAHNumber","DataType":"varchar"},{"Name":"ModeOfApproval","DataType":"varchar"},{"Name":"WithdrawalDate","DataType":"datetime"},{"Name":"RenewalDate","DataType":"datetime"},{"Name":"Country","DataType":"varchar"},{"Name":"TradeName","DataType":"varchar"},{"Name":"Strength","DataType":"varchar"},{"Name":"PackSize","DataType":"varchar"},{"Name":"DosageForm","DataType":"varchar"},{"Name":"ActiveSubstance","DataType":"varchar"},{"Name":"ApplicationType","DataType":"varchar"},{"Name":"SubmissionType","DataType":"varchar"},{"Name":"ApplicationProcedure","DataType":"varchar"},{"Name":"SubCaegory","DataType":"varchar"}],"LoadReference":[{"Name":"TableName","DataType":"nvarchar"},{"Name":"TableInsertOrder","DataType":"int"},{"Name":"ForeignKeys","DataType":"varchar"},{"Name":"LookupString","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"RouteAdministration":[{"Name":"Id","DataType":"bigint"},{"Name":"PharmaceuticalProductId","DataType":"bigint"},{"Name":"RouteAdministration","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"CodeDetails":[{"Name":"Code","DataType":"nvarchar"},{"Name":"Value","DataType":"nvarchar"},{"Name":"IsSystemDefined","DataType":"bit"},{"Name":"CodeMaster_Id","DataType":"int"},{"Name":"Id","DataType":"int"},{"Name":"System","DataType":"nvarchar"},{"Name":"MetaData","DataType":"nvarchar"}],"ShelfLife":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"DeviceId","DataType":"bigint"},{"Name":"Type","DataType":"nvarchar"},{"Name":"TimePeriod","DataType":"nvarchar"},{"Name":"UnitofMeasurement","DataType":"nvarchar"},{"Name":"StorageSpecialPrecautions","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"Strength":[{"Name":"Id","DataType":"bigint"},{"Name":"SubstanceId","DataType":"bigint"},{"Name":"PresentationStrengthRange","DataType":"nvarchar"},{"Name":"ConcentrationStrengthRange","DataType":"nvarchar"},{"Name":"MeasurementPoint","DataType":"nvarchar"},{"Name":"Country","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"DataDictionary":[{"Name":"Id","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"nvarchar"},{"Name":"LastUpdatedOn","DataType":"datetime"},{"Name":"LastUpdatedBy","DataType":"nvarchar"},{"Name":"TableInsertOrder","DataType":"int"},{"Name":"System","DataType":"nvarchar"},{"Name":"Version","DataType":"decimal"},{"Name":"Category","DataType":"nvarchar"},{"Name":"Class","DataType":"nvarchar"},{"Name":"Attribute","DataType":"nvarchar"},{"Name":"Description","DataType":"nvarchar"},{"Name":"TableName","DataType":"nvarchar"},{"Name":"ColumnName","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"ReferentialService","DataType":"xml"},{"Name":"ReferentialParameters","DataType":"xml"},{"Name":"ReferentialElements","DataType":"xml"},{"Name":"ReferenceType","DataType":"nvarchar"},{"Name":"ReferenceSections","DataType":"xml"},{"Name":"ReferenceTable","DataType":"nvarchar"},{"Name":"ReferenceName","DataType":"nvarchar"},{"Name":"IsActive","DataType":"bit"}],"Substances":[{"Name":"Id","DataType":"bigint"},{"Name":"Name","DataType":"nvarchar"},{"Name":"SubstanceName","DataType":"nvarchar"},{"Name":"SpecifiedSubstance","DataType":"nvarchar"},{"Name":"SpecifiedSubstanceGroup","DataType":"nvarchar"},{"Name":"ConfidentialityIndicator","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"ControlledVocabularies":[{"Name":"Id","DataType":"bigint"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Name","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Category","DataType":"nvarchar"},{"Name":"WMAcvCode","DataType":"nvarchar"},{"Name":"Version","DataType":"decimal"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"nvarchar"},{"Name":"Active","DataType":"bit"}],"TherapeuticIndication":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Text","DataType":"nvarchar"},{"Name":"Indication","DataType":"nvarchar"},{"Name":"DiseaseStatus","DataType":"nvarchar"},{"Name":"CoMorbidity","DataType":"nvarchar"},{"Name":"IntendedEffect","DataType":"nvarchar"},{"Name":"Timing","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"IDMPModel":[{"Name":"TypeName","DataType":"nvarchar"},{"Name":"is_user_defined","DataType":"bit"},{"Name":"is_assembly_type","DataType":"bit"},{"Name":"max_length","DataType":"smallint"},{"Name":"PRECISION","DataType":"tinyint"},{"Name":"scale","DataType":"tinyint"},{"Name":"TableName","DataType":"nvarchar"},{"Name":"ColumnName","DataType":"nvarchar"},{"Name":"Category","DataType":"nvarchar"}],"UndesirableEffects":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Text","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Classification","DataType":"nvarchar"},{"Name":"Occurrence","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"sysdiagrams":[{"Name":"name","DataType":"nvarchar"},{"Name":"principal_id","DataType":"int"},{"Name":"diagram_id","DataType":"int"},{"Name":"version","DataType":"int"},{"Name":"definition","DataType":"varbinary"}],"UserSessions":[{"Name":"SessionId","DataType":"int"},{"Name":"SessionGuid","DataType":"uniqueidentifier"},{"Name":"UserName","DataType":"nvarchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"DeviceId","DataType":"nvarchar"},{"Name":"DeviceName","DataType":"nvarchar"},{"Name":"Platform","DataType":"nvarchar"},{"Name":"Version","DataType":"nvarchar"},{"Name":"Location","DataType":"nvarchar"},{"Name":"LoggedOn","DataType":"datetime"},{"Name":"LoggedOff","DataType":"datetime"}],"pr_xml_code":[{"Name":"CodeName","DataType":"varchar"},{"Name":"CodeAlias","DataType":"varchar"},{"Name":"CodeValue","DataType":"varchar"},{"Name":"CodeOrder","DataType":"int"},{"Name":"RecordStatus","DataType":"int"},{"Name":"CreateDate","DataType":"datetime"},{"Name":"CreateUserID","DataType":"int"},{"Name":"LastActionDate","DataType":"datetime"},{"Name":"LastActionUserID","DataType":"int"},{"Name":"CodeID","DataType":"int"},{"Name":"LabelID","DataType":"int"},{"Name":"CodeGroup","DataType":"varchar"},{"Name":"CodeType","DataType":"nvarchar"}],"MedicinalProductName":[{"Name":"id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Name","DataType":"nvarchar"},{"Name":"InventedName","DataType":"nvarchar"},{"Name":"ScientificName","DataType":"nvarchar"},{"Name":"Strength","DataType":"nvarchar"},{"Name":"DoseForm","DataType":"nvarchar"},{"Name":"Formulation","DataType":"nvarchar"},{"Name":"IntendedUse","DataType":"nvarchar"},{"Name":"TargetPopulation","DataType":"nvarchar"},{"Name":"Container","DataType":"nvarchar"},{"Name":"Device","DataType":"nvarchar"},{"Name":"Trademark","DataType":"nvarchar"},{"Name":"Time","DataType":"nvarchar"},{"Name":"Flavour","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"Version":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Date","DataType":"datetime"},{"Name":"Identifier","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"MarketingAuthorisation":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Country","DataType":"nvarchar"},{"Name":"Number","DataType":"nvarchar"},{"Name":"SupplyLegalStatus","DataType":"nvarchar"},{"Name":"AuthorisationStatus","DataType":"nvarchar"},{"Name":"AuthorisationDate","DataType":"datetime"},{"Name":"ValidityPeriod","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"Organization":[{"Name":"Id","DataType":"bigint"},{"Name":"Identifier","DataType":"nvarchar"},{"Name":"Name","DataType":"nvarchar"},{"Name":"Address","DataType":"nvarchar"},{"Name":"ConfidentialityIndicator","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"RegulatedDocument":[{"Name":"Id","DataType":"bigint"},{"Name":"VersionId","DataType":"bigint"},{"Name":"DocumentIdentifier","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"RegulatedDocument","DataType":"nvarchar"},{"Name":"EffectiveDate","DataType":"datetime"},{"Name":"VersionNo","DataType":"decimal"}],"OtherCharacteristics":[{"Name":"Id","DataType":"bigint"},{"Name":"OtherCharacteristicsCodeSystem","DataType":"nvarchar"},{"Name":"OtherCharacteristicsCodeValue","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Device":[{"Name":"Id","DataType":"bigint"},{"Name":"PharmaceuticalProductId","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"OtherCharacteristicsId","DataType":"bigint"},{"Name":"Type","DataType":"nvarchar"},{"Name":"TradeName","DataType":"nvarchar"},{"Name":"Quantity","DataType":"tinyint"},{"Name":"ListingNumber","DataType":"nvarchar"},{"Name":"ModelNumber","DataType":"nvarchar"},{"Name":"BatchNumber","DataType":"nvarchar"},{"Name":"ExpirationDate","DataType":"datetime"},{"Name":"Material","DataType":"nvarchar"},{"Name":"AlternateMaterial","DataType":"nvarchar"},{"Name":"AllegenicityIndicator","DataType":"nvarchar"},{"Name":"SterilityIndicator","DataType":"nvarchar"},{"Name":"SterilisationRequirementIndicator","DataType":"nvarchar"},{"Name":"Usage","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"PackagedItem":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedMedicinalProductId","DataType":"bigint"},{"Name":"OtherCharacteristicsId","DataType":"bigint"},{"Name":"ContainerType","DataType":"nvarchar"},{"Name":"Quantity","DataType":"tinyint"},{"Name":"Material","DataType":"nvarchar"},{"Name":"AlternateMaterial","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"PackagedItemParentId","DataType":"bigint"},{"Name":"VersionNo","DataType":"decimal"}],"BatchIdentifier":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedMedicinalProductId","DataType":"bigint"},{"Name":"BAID1","DataType":"nvarchar"},{"Name":"BAID2","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"CODEDETAILSEN":[{"Name":"Id","DataType":"int"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Value","DataType":"nvarchar"},{"Name":"IsSystemDefined","DataType":"bit"},{"Name":"CodeMaster_Id","DataType":"int"},{"Name":"Language","DataType":"varchar"},{"Name":"MetaData","DataType":"nvarchar"}],"ContactPerson":[{"Name":"Id","DataType":"bigint"},{"Name":"OrganizationId","DataType":"bigint"},{"Name":"Name","DataType":"nvarchar"},{"Name":"Telecom","DataType":"nvarchar"},{"Name":"Role","DataType":"nvarchar"},{"Name":"ConfidentialityIndicator","DataType":"nvarchar"},{"Name":"Code","DataType":"int"},{"Name":"Email","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"ContraIndications":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Text","DataType":"nvarchar"},{"Name":"IndicationType","DataType":"nvarchar"},{"Name":"DiseaseStatus","DataType":"nvarchar"},{"Name":"CoMorbidity","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"ManufacturedItem":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"OtherCharacteristicsId","DataType":"bigint"},{"Name":"DoseForm","DataType":"nvarchar"},{"Name":"PresentationUnit","DataType":"nvarchar"},{"Name":"Quantity","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"Country":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductNameId","DataType":"bigint"},{"Name":"Country","DataType":"nvarchar"},{"Name":"Jurisdiction","DataType":"nvarchar"},{"Name":"Language","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"DataCarrierIdentifier":[{"Name":"Id","DataType":"bigint"},{"Name":"PackagedItemId","DataType":"bigint"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Value","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"DeviceBatchIdentification":[{"Name":"Id","DataType":"bigint"},{"Name":"DeviceId","DataType":"bigint"},{"Name":"BatchNumber","DataType":"nvarchar"},{"Name":"ExpiryDate","DataType":"datetime"},{"Name":"VersionNo","DataType":"decimal"}],"DeviceNomenclature":[{"Name":"Id","DataType":"bigint"},{"Name":"DeviceId","DataType":"bigint"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Term","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Ingredient":[{"Name":"Id","DataType":"bigint"},{"Name":"SubstancesId","DataType":"bigint"},{"Name":"PharmaceuticalProductId","DataType":"bigint"},{"Name":"ManufacturedItemId","DataType":"bigint"},{"Name":"Role","DataType":"nvarchar"},{"Name":"Filename","DataType":"varchar"},{"Name":"SubstanceCode","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Interactant":[{"Name":"Id","DataType":"bigint"},{"Name":"InteractionId","DataType":"bigint"},{"Name":"Code","DataType":"nvarchar"},{"Name":"Value","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Interactions":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"Text","DataType":"nvarchar"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Effect","DataType":"nvarchar"},{"Name":"Incidence","DataType":"nvarchar"},{"Name":"ManagementActions","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"Sources_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"OperationType","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"Evcode","DataType":"varchar"},{"Name":"SourceName","DataType":"varchar"},{"Name":"Comment","DataType":"varchar"}],"AuditHeader":[{"Name":"Id","DataType":"int"},{"Name":"EventName","DataType":"nvarchar"},{"Name":"EventSource","DataType":"nvarchar"},{"Name":"UserName","DataType":"nvarchar"},{"Name":"UserId","DataType":"nvarchar"},{"Name":"TimeStamp","DataType":"datetime"},{"Name":"SessionId","DataType":"uniqueidentifier"},{"Name":"ObjectId","DataType":"nvarchar"},{"Name":"ReferenceId","DataType":"int"},{"Name":"ReasonCode","DataType":"nvarchar"},{"Name":"ObjectType","DataType":"nvarchar"}],"Organization_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"Operationtype","DataType":"varchar"},{"Name":"TypeOfOrganization","DataType":"varchar"},{"Name":"NameOfOrganization","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"Evcode","DataType":"varchar"},{"Name":"OrganizationSenderID","DataType":"varchar"},{"Name":"Address","DataType":"varchar"},{"Name":"City","DataType":"varchar"},{"Name":"State","DataType":"varchar"},{"Name":"PostalCode","DataType":"varchar"},{"Name":"CountryCode","DataType":"varchar"},{"Name":"TelephoneNumber","DataType":"varchar"},{"Name":"TelephoneEXTN","DataType":"varchar"},{"Name":"TelCountryCode","DataType":"varchar"},{"Name":"FaxNumber","DataType":"varchar"},{"Name":"FaxEXTN","DataType":"varchar"},{"Name":"FaxCountryCode","DataType":"varchar"},{"Name":"Email","DataType":"varchar"},{"Name":"Comments","DataType":"varchar"},{"Name":"SMEStatus","DataType":"varchar"},{"Name":"SMENumber","DataType":"nchar"}],"Manufacturer":[{"Name":"Id","DataType":"bigint"},{"Name":"MedicinalProductId","DataType":"bigint"},{"Name":"DeviceId","DataType":"bigint"},{"Name":"OrganizationId","DataType":"bigint"},{"Name":"ManufacturingOperationId","DataType":"bigint"},{"Name":"Filename","DataType":"varchar"},{"Name":"VersionNo","DataType":"decimal"}],"ExtractMappings":[{"Name":"Id","DataType":"int"},{"Name":"Source","DataType":"nvarchar"},{"Name":"IsMultiValued","DataType":"bit"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"SortOrder","DataType":"int"},{"Name":"IsActive","DataType":"bit"},{"Name":"Keywords","DataType":"nvarchar"},{"Name":"CreatedBy","DataType":"nvarchar"},{"Name":"LastModifiedOn","DataType":"datetime"},{"Name":"LastModifiedBy","DataType":"nvarchar"},{"Name":"DefaultValue","DataType":"nvarchar"},{"Name":"Format","DataType":"nvarchar"},{"Name":"DictionaryId","DataType":"int"},{"Name":"Version","DataType":"decimal"},{"Name":"Type","DataType":"nvarchar"},{"Name":"Section","DataType":"nvarchar"},{"Name":"Attribute","DataType":"nvarchar"},{"Name":"Query","DataType":"nvarchar"}],"ManufacturingOperation":[{"Name":"Id","DataType":"bigint"},{"Name":"OperationType","DataType":"nvarchar"},{"Name":"AuthorisationReferenceNumber","DataType":"nvarchar"},{"Name":"EffectiveDate","DataType":"datetime"},{"Name":"ConfidentialityIndicator","DataType":"nvarchar"},{"Name":"VersionNo","DataType":"decimal"}],"MFL_XEVMPD":[{"Name":"Id","DataType":"int"},{"Name":"XEVMPDId","DataType":"int"},{"Name":"CreatedOn","DataType":"datetime"},{"Name":"CreatedBy","DataType":"varchar"},{"Name":"UpdatedOn","DataType":"datetime"},{"Name":"UpdatedBy","DataType":"varchar"},{"Name":"MFL","DataType":"varchar"},{"Name":"OperationType","DataType":"varchar"},{"Name":"LocalNumber","DataType":"varchar"},{"Name":"Evcode","DataType":"varchar"},{"Name":"MFLCompany","DataType":"varchar"},{"Name":"MFLDept","DataType":"varchar"},{"Name":"MFLBuilding","DataType":"varchar"},{"Name":"MFLStreet","DataType":"varchar"},{"Name":"MFLCity","DataType":"varchar"},{"Name":"MFLState","DataType":"varchar"},{"Name":"MFLPostalCode","DataType":"varchar"},{"Name":"MFLCountryCode","DataType":"varchar"},{"Name":"Comments","DataType":"varchar"}]}';
            var data2 = ["BigInt","Binary","Bit","Char","DateTime","Decimal","Float","Image","Int","Money","NChar","NText","NVarChar","Real","UniqueIdentifier","SmallDateTime","SmallInt","SmallMoney","Text","Timestamp","TinyInt","VarBinary","VarChar","Variant","Xml","Udt","Structured","Date","Time","DateTime2","DateTimeOffset"];
        $(document).ready(function() {
            getDataType();
            getTableList();
            $(document).on('selectTable', onTableSelect);
            $(document).on('deleteRow', onDeleteRow);
            $('#confirmDelete').click(onDeleteConfirm)
            $('#save_btn').click(saveModel);
        });
        function getTableList() {
			/*
            $.ajax({
                url: '/PR/IDMP/CustomDataModel/GetDBDetails',
                contentType: "application/json",
                type: 'GET',
                success: function (data) {
                    convertTableModel(JSON.parse(data));
                }
            });
			*/
			convertTableModel(JSON.parse(data1));
			
        }
        function getDataType(){
			/*
			$.ajax({
                url: '/PR/IDMP/CustomDataModel/GetAllSqlDBTypes',
                contentType: "application/json",
                type: 'GET',
                success: function (data) {
                    dataTypes = data2;
                }
            });
			*/
		    dataTypes = data2;
        }
        function convertTableModel(table) {
            for (let i in table) {
                var obj = {};
                obj.Table = i;
                obj.Columns = table[i];
                obj.Columns.forEach(function (e) {
                    e.changes = [];
                    e.modified = false;
                    e.delete = false;
                    e.columnName = e.Name;
                })
                tableList.push(obj);
            }           
            renderTable();
        }
        function renderTable() {
            let tableContainer = $('#table_list');
            tableContainer.empty();
            ht = '';
            $('#table_count').html(tableList.length);
            tableList.forEach(function (item, ind) {
                let columnCount = 0;
                let m = '';
                let active = '';
                item.Columns.forEach(function(col) {
                    if (!col.delete) {
                        columnCount++
                    }
                    if (col.modified) {
                        m = 'mod';
                    }
                    if(selectedTable ==ind){
                        active = 'active'
                    }
                })
                ht += '<a href="#" class="list-group-item '+active+'" index="' + ind + '" onclick="$.event.trigger({type:\'selectTable\', message:this})">' + item.Table + '<span class="badge ' + m + '">' + columnCount + '</span></a>'
            })
            tableContainer.append(ht);
            renderColumn(selectedTable);
        }
        function onTableSelect(e) {
            let ind = e.message.getAttribute('index')
            selectedTable = ind;
            renderTable();
        }
        function renderColumn(i) {
            let columnContainer = $('#column_list');
            columnContainer.empty();
            let ht = '';
            $('#table_name').html(tableList[i].Table)
            ht += '<div class="list-group table-list">';
            tableList[i].Columns.forEach(function (col, ind) {
                if (!col.delete) {
                    let m = '';
                    if (col.modified) {
                        m = 'mod';
                    }
                    ht += '<div class="list-group-item flex" style="display:flex;">';
                    ht += '<div style="display:flex;"><input class="col-name" path="' + i + '/' + ind + '" value="' + col.Name + '" style=" border: 0; " />';
                    ht += '<select class="data-type" path="' + i + '/' + ind + '">';

                    //ht += '<span class="form-control has-feedback" >X</span';
                    dataTypes.forEach(function (d) {
                        if (d.toLowerCase() == col.DataType.toLowerCase())
                            ht += '<option selected>' + d + '</option>';
                        else
                            ht += '<option>' + d + '</option>';
                    })
                    ht += '</select>'
                    ht += '<i class="glyphicon glyphicon-trash form-control-feedback" onclick="$.event.trigger({type:\'deleteRow\', message:this})" path="' + i + '/' + ind + '"></i>';
                    ht += '</div></div>'
                }
            });
            ht += '</div>';
            columnContainer.append(ht);
            columnEvents();
        }
        function columnEvents() {
            $('.col-name').on('change', function () {
                let x = $(this)[0].getAttribute('path').split('/');
                let col = tableList[x[0]].Columns[x[1]];
                $(this)[0].style.border = '1px solid orange';
                let obj={};
                if (col.Name != $(this)[0].value) {
                    col.modified = true;
                    obj.Type = 'ColumnName',
                    obj.OldValue = col.Name;
                    obj.NewValue = $(this)[0].value;
                    col.Name=$(this)[0].value;
                    col.changes.push(obj)
                }
                renderTable();
            })
            $('.data-type').change(function () {
                let x = $(this)[0].getAttribute('path').split('/');
                let col = tableList[x[0]].Columns[x[1]];
                $(this)[0].style.border = '1px solid orange';
                let obj={};
                if (col.DataType != $(this)[0].value) {
                    col.modified = true;
                    obj.Type = 'DataType',
                    obj.OldValue = col.DataType;
                    obj.NewValue = $(this)[0].value;
                    col.DataType=$(this)[0].value;
                    col.changes.push(obj)
                }
                renderTable();
            })
            $('#addColumn').on('click',onAddColumn);
        }
       
        function onDeleteRow(e) {
            $('#myModal').modal('show');
            deleteRecord = e.message.getAttribute('path');           
        }
        function onDeleteConfirm() {
            let x = deleteRecord.split('/');
            let col = tableList[x[0]].Columns[x[1]];
            col.delete = true;
            col.modified = true;
            renderTable();
        }
        function onAddColumn() {
            $('#addColumn').off('click',onAddColumn);
            let addColumn = $('#add_column');
            addColumn.empty();
            let ht = '';
            ht += '<div class="list-group-item flex" style="display:flex;justify-content:space-between"><div style="display:flex;">';
            ht += '<input id="tb" class="col-name" style=" border: 1px solid #ccc; ">';
            ht += '<select id="dd" class="data-type" style=" border: 1px solid #ccc; ">';
            dataTypes.forEach(function (d) {
                ht += '<option>' + d + '</option>';
            })
            ht += '</select></div><div>';
            ht += '<i class="glyphicon glyphicon-remove rem-col pull-right"></i>';
            ht += '<button type="button" class="btn-primary btn-xs pull-right" disabled style=" margin: 2px; " id="save_column">Add</button>';
            ht += '</div></div>';
            
            addColumn.append(ht);
            $('#save_column').click(onSaveColumn);
            $('#tb').keyup(function(){
                if($('#tb').val()){
                    $('#save_column').prop('disabled', false);
                }
                else{
                    $('#save_column').prop('disabled', true);
                }
                
            })
            $('.rem-col').click(function(){
                $('#add_column').empty();
                renderTable()
            });
        }
        function onSaveColumn() {
            if($('#tb').val() != "" || $('#tb').val() != undefined){          
            let obj = {};
            obj.Name = $('#tb').val();
            obj.DataType = $('#dd').val().toLowerCase();
            obj.changes = [];
               obj.modified = false;
                    obj.delete = false;
                    obj.columnName = obj.Name;
                    tableList[selectedTable].Columns.push(obj);
                    $('#add_column').empty();
                    renderTable();
            }
        }     
        function saveModel() {
            let finalModel = [];
            tableList.forEach(function (item) {
                let c=0;
                let cl=[]
                item.Columns.forEach(function (col) {
                    if (col.modified) {
                        cl.push(col);
                        
                        //col.modified = false;
                        //col.delete = false;
                    }
                   
                })

                let obj={};
                if(cl.length >0){
                   obj.Table = item.Table;
                   obj.Columns =cl;
                    finalModel.push(obj)
                }
            })
            $('#sModal').modal('show');
            
            renderTable();
            console.log(finalModel);
            
            //finalModel = '[{"Table":"MarketingAuthorisationHolder","Columns":[{"Name":"Id","DataType":"Int","Changes":[{"ChangeType":"DataType","OldValue":"Int","NewValue":"bigint"},{"ChangeType":"ColumnName","OldValue":"Id","NewValue":"OrganizationId1"}]},{"Name":"OrganizationId","DataType":"bigint","Changes":[{"ChangeType":"ColumnName","OldValue":"OrganizationId","NewValue":"OrganizationId1"}]}]}]';

            //$.ajax({
            //    url: '/PR/IDMP/CustomDataModel/SaveDBDetails',
            //    contentType: "application/json",
            //    data:JSON.stringify(finalModel),
            //    type: 'POST',
            //    success: function (data) {
            //        console.log(data);
            //    }
            //});
        }
        function groupBy(xs, key) {
            return xs.reduce(function (rv, x) {
                (rv[x[key]] = rv[x[key]] || []).push(x);
                return rv;
            }, {});
        };
    //})();
</script>
</body>

</html>
